{% extends 'main.html' %} 
<!-- display the content of this file on the content block of main.html-->

{% block content %}

<h1>{{room.name}}</h1>
<h3>ID {{room.id}}</h3>
<h4>Host @{{room.host.username}}</h4>
{% if request.user == room.host %}
<a href="{% url 'update-room' room.id %}">Edit</a>
<a href="{% url 'delete-room' room.id %}">Delete</a>
{% endif %}
<p>{{room.description}}</p>

<div>
    {% for message in room_messages %}
        <div>
            <p>@{{message.user}} {{message.created|timesince}} ago</p>
            {% if request.user == message.user %}
                <a href="{% url 'delete-message' message.id %}">Delete</a>
            {% endif %}
            <!--timesince gives us the time since that message was created-->
            <p>{{message.body}}</p>
        </div>
    {% endfor %}
</div>

{% if request.user.is_authenticated %}
<div>
    <form method="POST">
        {% csrf_token %}
        <input type="text" name="body" placeholder="New Message"/>
        <input type="submit" value="send">
    </form>
</div>
{% endif %}

{% endblock content %}
